<nz-breadcrumb>
  <nz-breadcrumb-item> Administrator </nz-breadcrumb-item>
  <nz-breadcrumb-item> Roles </nz-breadcrumb-item>
</nz-breadcrumb>
<h2 style="text-align: center">Danh sách Role</h2>
<div nz-row nzJustify="end" nzAlign="middle" [nzGutter]="24">
  <div nz-col nzXs="24" nzSm="24" nzLg="24">
    <button nz-button nzType="primary" (click)="isVisibleCreateForm = true">
      Thêm mới
    </button>
  </div>
</div>
<nz-table
  style="margin-top: 10px"
  nzBordered
  nzSize="small"
  #roleTable
  [nzData]="roles"
  nzTableLayout="fixed"
>
  <thead>
    <tr>
      <th>Name</th>
      <th>Label</th>
      <th nzEllipsis>Description</th>
      <th nzEllipsis>Permission</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of roleTable.data" (click)="onRoleClick(data)">
      <td>{{ data.name }}</td>
      <td>{{ data.label }}</td>
      <td
        nzEllipsis
        nz-tooltip
        [nzTooltipTitle]="data.description"
        nzTooltipColor="cyan"
      >
        {{ data.description }}
      </td>
      <td
        nzEllipsis
        nz-tooltip
        [nzTooltipTitle]="data.permission"
        nzTooltipColor="green"
      >
        {{ data.permission }}
      </td>
    </tr>
  </tbody>
</nz-table>

<nz-modal nzTitle="Tạo mới Role" [(nzVisible)]="isVisibleCreateForm">
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="createForm">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Name</nz-form-label>
        <nz-form-control nzErrorTip="Giá trị không hợp lệ">
          <input
            type="text"
            nz-input
            formControlName="name"
            placeholder="Name"
            pattern="[_a-z]{3,}"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Label</nz-form-label>
        <nz-form-control nzErrorTip="Giá trị không hợp lệ">
          <input
            type="text"
            nz-input
            formControlName="label"
            placeholder="Label"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Description</nz-form-label>
        <nz-form-control nzErrorTip="Bắt buộc nhập">
          <input
            type="text"
            nz-input
            formControlName="description"
            placeholder="Description"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Permission</nz-form-label>
        <nz-form-control nzErrorTip="Bắt buộc nhập">
          <nz-select
            nzMode="tags"
            nzPlaceHolder="Permission"
            formControlName="permission"
          >
            <nz-option
              *ngFor="let permission of permissions"
              [nzLabel]="permission.label"
              [nzValue]="permission.name"
            >
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-container>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="cancelCreateRole()">Hủy</button>
    <button nz-button nzType="primary" (click)="saveCreateRole()">Lưu</button>
  </div>
</nz-modal>

<nz-modal nzTitle="Update Role" [(nzVisible)]="isVisibleUpdateForm">
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="updateForm">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Name</nz-form-label>
        <nz-form-control nzErrorTip="Giá trị không hợp lệ">
          <input
            type="text"
            nz-input
            formControlName="name"
            placeholder="Name"
            pattern="[_a-z]{3,}"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Label</nz-form-label>
        <nz-form-control nzErrorTip="Giá trị không hợp lệ">
          <input
            type="text"
            nz-input
            formControlName="label"
            placeholder="Label"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Description</nz-form-label>
        <nz-form-control nzErrorTip="Bắt buộc nhập">
          <input
            type="text"
            nz-input
            formControlName="description"
            placeholder="Description"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Permission</nz-form-label>
        <nz-form-control nzErrorTip="Bắt buộc nhập">
          <nz-select
            nzMode="multiple"
            nzPlaceHolder="Permission"
            formControlName="permission"
          >
          <nz-option
              *ngFor="let option of permissions"
              [nzLabel]="option.label"
              [nzValue]="option.name"
            ></nz-option>
            
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-container>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="cancelUpdateRole()">Hủy</button>
    <button nz-button nzType="primary" (click)="saveUpdateRole()">Lưu</button>
  </div>
</nz-modal>
